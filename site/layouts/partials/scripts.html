{{ template "_internal/google_analytics.html" . }}
<script src="//code.jquery.com/jquery-3.1.1.min.js" integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8=" crossorigin="anonymous"></script>
<script src="//maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha384-aJ21OjlMXNL5UyIl/XNwTMqvzeRMZH2w8c5cRVpzpU8Y5bApTppSuUkhZXN0VxHd" crossorigin="anonymous"></script>

<script src="//cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/waypoints/4.0.1/jquery.waypoints.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/Counter-Up/1.0/jquery.counterup.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/jquery-parallax/1.1.3/jquery-parallax.js"></script>
{{ if .Site.Params.enableMaps }}
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin=""/>
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
<script src="{{ "js/leaflet.init.js" | relURL }}"></script>
{{ end }}
{{ if and .Site.Params.enableRecaptchaInContactForm .Site.Params.googleRecaptchaKey }}
<script src="//www.google.com/recaptcha/api.js" async defer></script>
{{ end }}
{{ if .Site.Params.enableEmailJS }}
<script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>
{{ end }}
<script src="{{ "js/front.js" | relURL }}"></script>

<!-- owl carousel -->
<script src="{{ "js/owl.carousel.min.js" | relURL }}"></script>
<script>
// Initialize college logos carousel after owlCarousel loads
(function() {
  function initCollegeLogosCarousel() {
    if (typeof jQuery !== 'undefined' && typeof jQuery.fn !== 'undefined' && typeof jQuery.fn.owlCarousel !== 'undefined') {
      var $carousel = jQuery('.college-logos-carousel');
      if ($carousel.length && !$carousel.hasClass('owl-loaded')) {
        try {
          $carousel.owlCarousel({
            items: ($carousel.attr('data-items') || 5),
            slideSpeed: ($carousel.attr('data-slide-speed') || 3000),
            paginationSpeed: ($carousel.attr('data-pagination-speed') || 1000),
            autoPlay: ($carousel.attr('data-autoplay') || 'true') === 'true',
            navigation: false,
            pagination: false,
            loop: true,
            autoplayTimeout: 2000,
            autoplayHoverPause: false,
            itemsDesktopSmall: [990, 5],
            itemsTablet: [768, 4],
            itemsMobile: [480, 2]
          });
        } catch(e) {
          console.error('Error initializing college logos carousel:', e);
          setTimeout(initCollegeLogosCarousel, 300);
        }
      }
    } else {
      // Retry if owlCarousel isn't loaded yet
      setTimeout(initCollegeLogosCarousel, 100);
    }
  }
  
  // Wait for owlCarousel script to load, then initialize
  var checkOwlCarousel = setInterval(function() {
    if (typeof jQuery !== 'undefined' && typeof jQuery.fn !== 'undefined' && typeof jQuery.fn.owlCarousel !== 'undefined') {
      clearInterval(checkOwlCarousel);
      // Wait a bit more for DOM to be ready
      if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', function() {
          setTimeout(initCollegeLogosCarousel, 100);
        });
      } else {
        setTimeout(initCollegeLogosCarousel, 100);
      }
    }
  }, 50);
  
  // Fallback: try on window load
  window.addEventListener('load', function() {
    setTimeout(initCollegeLogosCarousel, 200);
  });
  
  // Timeout after 5 seconds to stop checking
  setTimeout(function() {
    clearInterval(checkOwlCarousel);
  }, 5000);
})();
</script>

<!-- Calendly popup script -->
<script src="https://assets.calendly.com/assets/external/widget.js" type="text/javascript" async></script>
<script>
(function initFloatingBookNow() {
  function bindCalendlyButton() {
    var btn = document.querySelector('.floating-book-now-btn')
    if (!btn) return
    btn.addEventListener('click', function (e) {
      e.preventDefault()
      if (window.Calendly) {
        Calendly.initPopupWidget({
          url: 'https://calendly.com/coastresusgroup?hide_gdpr_banner=1'
        })
      } else {
        window.open('https://calendly.com/coastresusgroup', '_blank')
      }
    })
  }

  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', bindCalendlyButton)
  } else {
    bindCalendlyButton()
  }
})()
</script>

<!-- Floating booking cluster -->
<div class="floating-booking-cluster">
  <button class="floating-book-now-btn">Book Now</button>
  <div class="floating-partner-logos">
    <img src="/img/ARC_main.png" alt="Australian Resuscitation Council" />
    <img src="/img/RA_Logo.svg" alt="Resuscitation Australia" />
    <img src="/img/ENA.svg" alt="Emergency Nurses Association" />
  </div>
</div>

